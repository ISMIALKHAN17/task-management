<div class="globel_wrap">
  <div class="loading_wrap" *ngIf="loading">
    <span class="loader"></span>
  </div>
  <div class="globel_header d-flex justify-content-between align-items-center">
    <h3>Dashboard</h3>
  </div>
  <div class="table_wrap">
    <table class="table table-striped" >
      <thead>
        <tr>
          <th scope="col">#</th>
          <th class="pointerC" scope="col" (click)="sortTasks('client.name')">Client Name</th>
          <th class="pointerC" scope="col" (click)="sortTasks('dueDate')">Due Date</th>
          <th class="pointerC" scope="col" (click)="sortTasks('name')">Name</th>
          <th class="pointerC" scope="col" (click)="sortTasks('user.name')">Assigned to</th>
          <th class="pointerC" scope="col" (click)="sortTasks('description')">Description</th>
          <th class="pointerC" scope="col" (click)="sortTasks('status')">Status</th>
        </tr>
      </thead>
      <tbody>
        <ng-container *ngIf="tasks.length > 0; else noResults">
          <tr *ngFor="let task of tasks; index as i">
            <td>{{ i+1 }}</td>
            <td>{{ task.client.name }}</td>
            <td>{{ formatDate(task.dueDate) }}</td>
            <td>{{ task.name.length > 10 ? task.name.slice(0, 10) + '...' : task.name }}</td>
            <td>{{ task.user.name }}</td>
            <td>{{ task.description.length > 20 ? task.description.slice(0, 20) + '...' : task.description }}</td>
            <td>{{ task.status }}</td>
          </tr>
        </ng-container>
        <ng-template #noResults>
          <tr>
            <td colspan="8" class="text-center">No incomplete tasks  found.</td>
          </tr>
        </ng-template>
      </tbody>
    </table>
   </div>

    <div class="pagination d-flex justify-content-center" *ngIf="paginationData.last_page > 1">
      <nav>
        <ul class="pagination justify-content-center" >
          <li class="page-item">
            <a class="page-link" (click)="taskPaginantion(paginationData.current_page-1)"  [ngClass]="{ 'disabled': paginationData.current_page === 1 }" aria-label="First">
              <span aria-hidden="true"><i class="fa-solid fa-chevron-left"></i></span>
            </a>
          </li>
          <li class="page-item"  *ngFor="let item of pagination">
            <a class="page-link" [ngClass]="{'active': paginationData.current_page == item}" (click)="taskPaginantion(item)"  aria-label="First">
              <span aria-hidden="true">{{item}}</span>
            </a>
          </li>
          <li class="page-item">
            <a class="page-link"  (click)="taskPaginantion(paginationData.current_page+1)" [ngClass]="{ 'disabled': paginationData.current_page === paginationData.last_page }"  aria-label="First">
              <span aria-hidden="true"><i class="fa-solid fa-chevron-right"></i></span>
            </a>
          </li>
        </ul>
      </nav>
    </div>
</div>
